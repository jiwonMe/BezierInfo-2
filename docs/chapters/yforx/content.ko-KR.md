# X가 주어졌을 때 Y 찾기

CSS 작업, 파라메트릭 이퀄라이저, 이미지 레벨링 또는 베지에 곡선이 제어 곡선으로 사용되는 기타 여러 애플리케이션에서 나타나는 일반적인 작업 중 하나는, 하나의 "x" 값에 실제로 하나의 "y" 값만 연관되는 방식으로 사용될 때, 중간 단계를 건너뛰고 "x"를 기반으로 "y"를 직접 계산하고 싶을 수 있습니다. 결국 함수가 충분히 간단해 보이니 "y" 값을 찾는 것도 간단해야 하지 않을까요? 안타깝게도 그렇지 않습니다. 하지만 _가능하기는_ 하고 도움이 되는 코드만 있다면 그다지 많은 작업도 아닙니다.

이 문제를 두 단계로 해결하겠습니다. 첫 번째 단계는 어려운 부분으로, 주어진 "x" 값에 속하는 "t" 값이 무엇인지 알아내는 것입니다. 예를 들어 다음 그래픽을 봅시다. 왼쪽에는 모든 면에서 우리 기준에 맞는 것처럼 보이는 베지에 곡선이 있습니다. 모든 "x"에 하나의 "y" 값만 연관되어 있습니다. 오른쪽에는 "x" 값만을 위한 함수가 있습니다. 3차 곡선이지만 정말 미친 3차 곡선은 아닙니다. 그래픽의 슬라이더를 움직이면 `x` 좌표에 해당하는 빨간 선이 그려집니다. 왼쪽 그래픽에서는 수직선이고 오른쪽에서는 수평선입니다.

<graphics-element title="x=x(t)일 때 t 찾기. 왼쪽: 우리 곡선, 오른쪽: 함수 x=f(t)" width="550" src="./basics.js">
  <input type="range" min="0" max="1" step="0.01" class="slide-control">
</graphics-element>

이제 오른쪽 그래픽을 더 자세히 보면 흥미로운 것을 알 수 있습니다. 빨간 선을 "x 축"으로 취급하면, 함수가 우리 선과 교차하는 점은 실제로 이동된 "x축"을 통한 3차 함수 x(t)의 근일 뿐입니다... 그리고 [이미 봤듯이](#extremities) 근을 계산하는 방법을 알고 있으므로, 3차 근 찾기를 실행하면 됩니다. 복잡한 3차 케이스도 아닙니다. 시작하는 곡선의 종류 때문에 [0,1] 구간에 기껏해야 하나의 근만 있다는 것을 _알고_ 있으므로 필요한 코드가 단순화됩니다!

먼저 x(t)에 대한 함수를 봅시다.

\[
    x(t) = a(1-t)^3 + 3b(1-t)^2t + 3c(1-t)t^2 + dt^3
\]

이것을 완전히 전개하고 다항식 인수를 수집하여 일반 다항식 형태로 다시 쓸 수 있습니다.

\[
    x(t) = (-a + 3b- 3c + d)t^3 + (3a - 6b + 3c)t^2 + (-3a + 3b)t + a
\]

특별한 것은 없습니다. 이것은 "거듭제곱" 형태의 표준 3차 다항식입니다(즉, 모든 항이 `t`의 거듭제곱으로 정렬됨). 따라서 `a`, `b`, `c`, `d` *그리고* `x(t)`가 모두 알려진 상수라면, `x(t)`를 등호 건너편으로 이동하여 이것을 간단하게 다시 쓸 수 있습니다.

\[
    (-a + 3b - 3c + d)t^3 + (3a - 6b + 3c)t^2 + (-3a + 3b)t + (a-x) = 0
\]

다른 모든 값 a, b, c, d에 대한 'minus x'가 어디로 갔는지 궁금할 수 있는데, 답은 모두 상쇄되므로 실제로 빼야 하는 것은 끝의 것뿐입니다. 편리합니다! 이제 Cardano 알고리즘을 사용하여 이 방정식을 풀면 꽤 짧은 코드가 남습니다.

```
// 근 찾기를 위한 값 준비:
x = 이미 알고 있는 값
xcoord = 베지에 곡선의 x 좌표 집합
foreach p in xcoord: p.x -= x

// 정확히 하나 있다는 것을 알고 있는 근 찾기:
t = getRoots(p[0], p[1], p[2], p[3])[0]

// 답 찾기:
if t in [0,1] y = curve.get(t).y
```

절차는 상당히 간단합니다. `x`를 선택하고, 관련된 `t` 값을 찾고, 그 `t` 값에 대해 곡선을 평가하면 곡선의 {x,y} 좌표를 얻을 수 있으므로 이 `x`에 대한 `y`를 알게 됩니다. 다음 그래픽의 슬라이더를 움직여 실제로 확인해보세요.

<graphics-element title="주어진 x에 대해 t를 찾아서 By(t) 찾기" src="./yforx.js">
  <input type="range" min="0" max="1" step="0.01" class="slide-control">
</graphics-element>
