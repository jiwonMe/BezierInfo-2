# 고정 거리 간격으로 곡선 추적하기

베지에 곡선을 사용하여 실선이 아닌 점선으로 곡선을 그리거나, 레일 위의 기차처럼 시간이 지남에 따라 고정된 거리 간격으로 곡선을 따라 무언가를 이동하고 싶다고 가정해봅시다.

이제 문제가 생겼습니다.

문제가 있는 이유는 베지에 곡선이 비선형 동작을 가진 매개변수 함수인 반면, 선로를 따라 기차를 움직이는 것은 선형 동작의 실용적인 예에 가깝기 때문입니다. 우리가 직면한 문제는 고정 간격으로 `t` 값을 선택한다고 해서 베지에 함수가 고정된 거리만큼 떨어진 점을 생성할 것이라고 기대할 수 없다는 것입니다. 실제로 "곡선을 따라 가는 거리"와 "`t` 값" 사이의 관계를 서로에 대해 플롯하여 살펴봅시다.

다음 그래픽은 특히 예시적인 곡선과 그 t에 대한 거리 플롯을 보여줍니다. 선형 순회의 경우 이 선이 직선이어야 하며 (0,0)에서 (length,1)까지 이어져야 합니다. 하지만 우리가 볼 것은 그게 아니라 매우 흔들리는 무언가입니다. 설상가상으로 t에 대한 거리 함수는 곡선보다 훨씬 높은 차수입니다. 이 연습에 사용하는 곡선은 기껏해야 두 번 오목/볼록 형태를 전환할 수 있는 3차 곡선이지만, 거리 함수는 우리의 오랜 친구인 호 길이 함수로, 더 많은 변곡점을 가질 수 있습니다.

<graphics-element title="거리에 대한 t 함수" width="550" src="./distance-function.js"></graphics-element>

그렇다면 실제로 작업할 수 없는 호 길이 함수를 어떻게 정규 간격으로 "자를" 수 있을까요? 기본적으로 속임수를 씁니다. `t` 값을 사용하여 곡선을 순회하고, 실행 중에 생성하는 각 점에서 이-`t`-값에-대한-거리를 결정한 다음, 대신 해당 값을 사용하여 "필요한 거리와 일치하는 가장 가까운 `t` 값"을 찾습니다. 샘플링된 점의 수가 적으면 두 점 사이를 보간하여 원하는 거리에 "적합한" `t` 값을 세분화할 수도 있지만, 충분히 많은 수의 샘플이 있으면 신경 쓸 필요도 없습니다.

그럼 정확히 그렇게 해봅시다. 다음 그래프는 이전 것과 유사하며, 곡선에서 정기적으로 간격을 둔 점을 얻기 위해 t에 대한 거리 곡선을 어떻게 "잘라야" 하는지 보여줍니다. 또한 두 거리 마커 사이의 각 곡선 섹션을 다르게 색칠하여 실제 곡선에서 해당 `t` 값을 사용하면 어떻게 보이는지 보여줍니다.

<graphics-element title="고정 간격으로 곡선 색칠하기" width="825" src="./tracing.js">
  <input type="range" min="2" max="24" step="1" value="8" class="slide-control">
</graphics-element>

슬라이더를 사용하여 곡선을 색칠하는 데 사용되는 등거리 세그먼트의 수를 늘리거나 줄이세요.

하지만 더 나은 방법이 있을까요? 한 가지 방법은 Geometric Tools, LLC의 David Eberly가 쓴 "[Moving Along a Curve with Specified Speed](https://www.geometrictools.com/Documentation/MovingAlongCurveSpecifiedSpeed.pdf)"에서 논의되지만, 기본적으로 명시적인 길이 함수가 없기 때문에(또는 오히려 다른 구간에 대해 지속적으로 계산하지 않아도 되는 함수가 없기 때문에), 전통적인 조회 테이블(LUT)을 사용하는 것이 더 나을 수 있습니다.
