# 곡선/곡선 교차점

드 카스텔죠 알고리즘을 사용하여 곡선을 분할하면 이제 "분할 정복" 기법을 사용하여 곡선/곡선 교차점 찾기를 구현할 수 있습니다.

1. 두 곡선 *C<sub>1</sub>*과 *C<sub>2</sub>*를 가져와서 쌍으로 취급합니다.
2. 바운딩 박스가 겹치면 각 곡선을 두 개의 하위 곡선으로 분할합니다.
3. *C<sub>1.1</sub>*, *C<sub>1.2</sub>*, *C<sub>2.1</sub>*, *C<sub>2.2</sub>*를 사용하여 4개의 새 쌍 (*C<sub>1.1</sub>*,*C<sub>2.1</sub>*), (*C<sub>1.1</sub>*, *C<sub>2.2</sub>*), (*C<sub>1.2</sub>*,*C<sub>2.1</sub>*), (*C<sub>1.2</sub>*,*C<sub>2.2</sub>*)을 만듭니다.
4. 각 쌍에 대해 바운딩 박스가 겹치는지 확인합니다.
  1. 바운딩 박스가 겹치지 않으면 이 곡선 쌍 사이에는 교차점이 없으므로 쌍을 버립니다.
  2. 겹침이 <em>있으면</em> 이 쌍에 대해 모든 단계를 다시 실행합니다.
5. 우리가 만드는 하위 곡선이 사실상 하위 픽셀 영역을 차지할 정도로 작아지면 교차점을 찾은 것으로 간주합니다. 하위 픽셀 수준에서 여러 교차점의 클러스터가 있을 수 있으며, 그중 하나를 "발견된" `t` 값으로 선택합니다(하나를 제외한 모든 것을 버리거나, 클러스터의 `t` 값을 평균하거나, 더 창의적인 작업을 할 수 있음).

이 알고리즘은 단일 쌍으로 시작하여 많은 수의 잠재적 하위 쌍에 대해 병렬로 실행될 때까지 "풍선처럼 부풀어"오른 다음, 교차 좌표로 좁혀지면서 다시 가늘어져 교차점 수만큼의 쌍으로 끝납니다.

다음 그래픽은 이 알고리즘을 3차 곡선 쌍에 한 번에 한 단계씩 적용하므로 알고리즘이 작동하는 것을 볼 수 있습니다. 버튼을 클릭하여 곡선을 창의적으로 배치한 후 알고리즘의 단일 단계를 실행하세요. 5단계에서 곡선이 충분히 작은지 결정하는 데 사용되는 값을 변경할 수도 있습니다. 곡선을 조작하거나 임계값을 변경하면 알고리즘이 재설정되므로 다양한 곡선으로 시도해볼 수 있습니다.

(두 3차 곡선 사이에서 최대 교차점 수를 산출하는 구성을 찾을 수 있나요? 9개 교차점!)

<graphics-element title="곡선/곡선 교차점" width="825" src="./curve-curve.js">
  <button class="next">한 단계 진행</button>
  <input type="range" min="0.01" max="5" step="0.01" value="1" class="slide-control">
</graphics-element>

자체 교차점 찾기는 사실상 같은 절차인데, 단일 곡선으로 시작하므로 먼저 두 개의 별도 곡선으로 바꿔야 합니다. 이것은 변곡점에서 분할하여, 또는 변곡점이 없으면 먼저 `t=0.5`에서 분할하여 간단하게 달성할 수 있으며, 그런 다음 위와 정확히 같은 알고리즘을 실행하여 각 반복에서 겹치지 않는 모든 곡선 쌍을 제거하고 각 연속 단계에서 곡선의 자체 교차점으로 좁혀집니다.
